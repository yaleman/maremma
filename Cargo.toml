[package]
name = "maremma"
version = "0.1.0"
edition = "2021"
license = "MIT"

[features]
# Enables the badssl tests for TLS things
"test_badssl" = []

[lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(tarpaulin_include)'] }

[dependencies]
askama = { version = "0.12.1", features = ["with-axum"] }
askama_axum = "0.4.0"
async-trait = "0.1.81"
axum = { version = "0.7.5", features = [
    "http2",
    "macros",
    "tracing",
    "form",
    "query",
] }
axum-oidc = "0.4.0"
axum-server = { version = "0.7.1", features = ["rustls", "tls-rustls"] }
chrono = "0.4.38"
clap = { version = "4.5.16", features = ["derive", "env"] }
croner = "2.0.5"
env_logger = { version = "0.11.5", features = ["color", "default"] }
log = { version = "0.4.22", features = ["release_max_level_debug"] }
kube = { version = "0.93.1", features = ["config"] }
k8s-openapi = { version = "0.22.0", features = ["latest"] }
num_cpus = "1.16.0"
opentelemetry = "0.24.0"
opentelemetry-prometheus = "0.17.0"
opentelemetry-stdout = "0.5.0"
opentelemetry_sdk = { version = "0.24.1", features = [
    "rt-tokio",
    "serde",
    "tokio",
    "url",
] }
prometheus = "0.13.4"
reqwest = { version = "0.12.5", features = ["http2"] }
rustls = { version = "0.23.12", features = ["zlib"] }
schemars = { version = "0.8.21", features = [
    "uuid1",
    "url",
    "chrono",
    "preserve_order",
] }
serde = { version = "1.0.208", features = ["derive"] }
serde_json = "1.0.125"
sha256 = "1.5.0"
sea-orm = { version = "1.0.0", features = [
    "runtime-tokio-rustls", # this is why we have multiple rustls
    "sqlx-sqlite",
    "macros",
    "with-chrono",
    "with-json",
    "with-uuid",
    "debug-print",
] }
sea-orm-migration = { version = "1.0.0", features = [
    "sqlx-sqlite",
    "with-chrono",
    "with-json",
    "with-uuid",
] }
sqlx = { version = "0.8.0", default-features = false }
surge-ping = "0.8.1"
tokio = { version = "1.39.2", features = [
    "rt-multi-thread",
    "macros",
    "process",
    "tracing",
    "net",
] }
tokio-rustls = "0.26.0"
tower = { version = "0.5.0", features = ["util"] }
tower-http = { version = "0.5.2", features = ["fs"] }
tower-sessions = "0.12.3"
tracing = { version = "0.1.40", features = ["release_max_level_debug"] }
uuid = { version = "1.10.0", features = ["serde", "v4"] }
webpki-roots = "0.26.3"
x509-parser = "0.16.0"

[dev-dependencies]
rand = "0.8.5"
